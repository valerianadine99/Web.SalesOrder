"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{8823:function(e,r,t){t.d(r,{zx:function(){return l},y:function(){return f},mx:function(){return w},II:function(){return d},ZU:function(){return A}});var s=t(7437),a=t(2265),i=t(7042),o=t(4769);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.m6)((0,i.W)(r))}let l=a.forwardRef((e,r)=>{let{className:t,variant:a="primary",size:i="md",loading:o=!1,disabled:l,children:d,...c}=e;return(0,s.jsxs)("button",{className:n("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus-visible:ring-primary-500",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus-visible:ring-secondary-500",success:"bg-success-600 text-white hover:bg-success-700 focus-visible:ring-success-500",warning:"bg-warning-600 text-white hover:bg-warning-700 focus-visible:ring-warning-500",danger:"bg-danger-600 text-white hover:bg-danger-700 focus-visible:ring-danger-500",outline:"border border-primary-600 text-primary-600 hover:bg-primary-50 focus-visible:ring-primary-500",ghost:"text-primary-600 hover:bg-primary-50 focus-visible:ring-primary-500"}[a],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[i],t),ref:r,disabled:l||o,...c,children:[o&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})});l.displayName="Button";let d=a.forwardRef((e,r)=>{let{className:t,label:a,error:i,helperText:o,id:l,name:d,...c}=e,u=l||(d?"input-".concat(d):"input-field");return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-secondary-700 mb-1",children:a}),(0,s.jsx)("input",{id:u,name:d,className:n("flex h-10 w-full rounded-md border border-secondary-300 bg-white px-3 py-2 text-sm","placeholder:text-secondary-400","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",i&&"border-danger-500 focus:ring-danger-500",t),ref:r,...c}),i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:i}),o&&!i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-secondary-500",children:o})]})});d.displayName="Input",a.forwardRef((e,r)=>{let{className:t,label:a,error:i,helperText:o,options:l,placeholder:d,onChange:c,id:u,name:m,...x}=e,h=u||(m?"select-".concat(m):"select-field");return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:h,className:"block text-sm font-medium text-secondary-700 mb-1",children:a}),(0,s.jsxs)("select",{id:h,className:n("flex h-10 w-full rounded-md border border-secondary-300 bg-white px-3 py-2 text-sm","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",i&&"border-danger-500 focus:ring-danger-500",t),ref:r,onChange:e=>{c&&c(e.target.value)},...x,children:[d&&(0,s.jsx)("option",{value:"",disabled:!0,children:d}),l.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:i}),o&&!i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-secondary-500",children:o})]})}).displayName="Select";var c=t(1865),u=t(8110),m=t(2160),x=t(5635),h=t(2549),p=t(9883),g=t(1138),y=t(5925);let v=m.Ry({productName:m.Z_().min(1,"El nombre del producto es requerido"),productCode:m.Z_().min(1,"El c\xf3digo del producto es requerido"),quantity:m.Rx().min(1,"La cantidad debe ser mayor a 0"),unitPrice:m.Rx().min(.01,"El precio debe ser mayor a 0")}),b=m.Ry({customerName:m.Z_().min(1,"El nombre del cliente es requerido"),customerEmail:m.Z_().email("Email inv\xe1lido"),orderDate:m.Z_().min(1,"La fecha de la orden es requerida"),orderDetails:m.IX(v).min(1,"Debe tener al menos un producto")});var f=e=>{var r,t,i;let{isOpen:o,onClose:n}=e,{createOrder:m,isLoading:v}=(0,x.L)(),[f,N]=(0,a.useState)(!1),{register:j,control:w,handleSubmit:C,formState:{errors:k},reset:D,watch:E}=(0,c.cI)({resolver:(0,u.F)(b),defaultValues:{orderDate:new Date().toISOString().split("T")[0],orderDetails:[{productName:"",productCode:"",quantity:1,unitPrice:0}]}}),{fields:O,append:A,remove:S}=(0,c.Dq)({control:w,name:"orderDetails"}),P=E("orderDetails"),L=(e,r)=>e*r,q=async e=>{N(!0);try{await m(e),(0,y.default)("Orden creada exitosamente",{icon:"✅"}),D(),n()}catch(e){(0,y.default)("Error al crear la orden",{icon:"❌"})}finally{N(!1)}},z=e=>{O.length>1&&S(e)};return o?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-secondary-200",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-secondary-900",children:"Crear Nueva Orden"}),(0,s.jsx)("button",{onClick:n,className:"text-secondary-400 hover:text-secondary-600",children:(0,s.jsx)(h.Z,{className:"h-6 w-6"})})]}),(0,s.jsxs)("form",{onSubmit:C(q),className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d,{label:"Nombre del Cliente",placeholder:"Nombre completo del cliente",error:null===(r=k.customerName)||void 0===r?void 0:r.message,...j("customerName")}),(0,s.jsx)(d,{label:"Email del Cliente",type:"email",placeholder:"cliente@email.com",error:null===(t=k.customerEmail)||void 0===t?void 0:t.message,...j("customerEmail")})]}),(0,s.jsx)(d,{label:"Fecha de la Orden",type:"date",error:null===(i=k.orderDate)||void 0===i?void 0:i.message,...j("orderDate")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Productos de la Orden"}),(0,s.jsxs)(l,{type:"button",variant:"outline",size:"sm",onClick:()=>{A({productName:"",productCode:"",quantity:1,unitPrice:0})},className:"flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4"}),"Agregar Producto"]})]}),O.map((e,r)=>{var t,a,i,o,n,l,c,u,m,x,h,p,y,v;return(0,s.jsxs)("div",{className:"border border-secondary-200 rounded-lg p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h4",{className:"text-sm font-medium text-secondary-700",children:["Producto ",r+1]}),O.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>z(r),className:"text-danger-500 hover:text-danger-700",children:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d,{label:"Nombre del Producto",placeholder:"Nombre del producto",error:null===(i=k.orderDetails)||void 0===i?void 0:null===(a=i[r])||void 0===a?void 0:null===(t=a.productName)||void 0===t?void 0:t.message,...j("orderDetails.".concat(r,".productName"))}),(0,s.jsx)(d,{label:"C\xf3digo del Producto",placeholder:"C\xf3digo \xfanico",error:null===(l=k.orderDetails)||void 0===l?void 0:null===(n=l[r])||void 0===n?void 0:null===(o=n.productCode)||void 0===o?void 0:o.message,...j("orderDetails.".concat(r,".productCode"))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d,{label:"Cantidad",type:"number",min:"1",placeholder:"1",error:null===(m=k.orderDetails)||void 0===m?void 0:null===(u=m[r])||void 0===u?void 0:null===(c=u.quantity)||void 0===c?void 0:c.message,...j("orderDetails.".concat(r,".quantity"),{valueAsNumber:!0})}),(0,s.jsx)(d,{label:"Precio Unitario",type:"number",min:"0.01",step:"0.01",placeholder:"0.00",error:null===(p=k.orderDetails)||void 0===p?void 0:null===(h=p[r])||void 0===h?void 0:null===(x=h.unitPrice)||void 0===x?void 0:x.message,...j("orderDetails.".concat(r,".unitPrice"),{valueAsNumber:!0})})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{className:"text-sm text-secondary-600",children:["Subtotal: $",L((null===(y=P[r])||void 0===y?void 0:y.quantity)||0,(null===(v=P[r])||void 0===v?void 0:v.unitPrice)||0).toFixed(2)]})})]},e.id)}),k.orderDetails&&(0,s.jsx)("p",{className:"text-sm text-danger-600",children:k.orderDetails.message})]}),(0,s.jsx)("div",{className:"border-t border-secondary-200 pt-4",children:(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{className:"text-lg font-semibold text-secondary-900",children:["Total: $",P.reduce((e,r)=>e+L(r.quantity||0,r.unitPrice||0),0).toFixed(2)]})})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(l,{type:"button",variant:"outline",onClick:n,disabled:f,children:"Cancelar"}),(0,s.jsx)(l,{type:"submit",loading:f,disabled:f,children:f?"Creando Orden...":"Crear Orden"})]})]})]})}):null};let N=m.Ry({productName:m.Z_().min(1,"El nombre del producto es requerido"),productCode:m.Z_().min(1,"El c\xf3digo del producto es requerido"),quantity:m.Rx().min(1,"La cantidad debe ser mayor a 0"),unitPrice:m.Rx().min(.01,"El precio debe ser mayor a 0")}),j=m.Ry({customerName:m.Z_().min(1,"El nombre del cliente es requerido"),customerEmail:m.Z_().email("Email inv\xe1lido"),orderDate:m.Z_().min(1,"La fecha de la orden es requerida"),orderDetails:m.IX(N).min(1,"Debe tener al menos un producto")});var w=e=>{var r,t,i;let{isOpen:o,order:n,onClose:m}=e,{updateOrder:v}=(0,x.L)(),[b,f]=(0,a.useState)(!1),{register:N,control:w,handleSubmit:C,formState:{errors:k},reset:D,watch:E,setValue:O}=(0,c.cI)({resolver:(0,u.F)(j)}),{fields:A,append:S,remove:P}=(0,c.Dq)({control:w,name:"orderDetails"}),L=E("orderDetails");(0,a.useEffect)(()=>{n&&o&&(O("customerName",n.customerName),O("customerEmail",n.customerEmail),O("orderDate",n.orderDate.split("T")[0]),O("orderDetails",n.orderDetails.map(e=>({productName:e.productName,productCode:e.productCode,quantity:e.quantity,unitPrice:e.unitPrice}))))},[n,o,O]);let q=(e,r)=>e*r,z=async e=>{if(n){f(!0);try{let r={id:n.id,...e};await v(n.id,r),(0,y.default)("Orden actualizada exitosamente",{icon:"✅"}),m()}catch(e){(0,y.default)("Error al actualizar la orden",{icon:"❌"})}finally{f(!1)}}},T=e=>{A.length>1&&P(e)},Z=()=>{D(),m()};return o&&n?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-secondary-200",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-secondary-900",children:["Editar Orden #",n.id]}),(0,s.jsx)("button",{onClick:Z,className:"text-secondary-400 hover:text-secondary-600",children:(0,s.jsx)(h.Z,{className:"h-6 w-6"})})]}),(0,s.jsxs)("form",{onSubmit:C(z),className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d,{label:"Nombre del Cliente",placeholder:"Nombre completo del cliente",error:null===(r=k.customerName)||void 0===r?void 0:r.message,...N("customerName")}),(0,s.jsx)(d,{label:"Email del Cliente",type:"email",placeholder:"cliente@email.com",error:null===(t=k.customerEmail)||void 0===t?void 0:t.message,...N("customerEmail")})]}),(0,s.jsx)(d,{label:"Fecha de la Orden",type:"date",error:null===(i=k.orderDate)||void 0===i?void 0:i.message,...N("orderDate")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Productos de la Orden"}),(0,s.jsxs)(l,{type:"button",variant:"outline",size:"sm",onClick:()=>{S({productName:"",productCode:"",quantity:1,unitPrice:0})},className:"flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4"}),"Agregar Producto"]})]}),A.map((e,r)=>{var t,a,i,o,n,l,c,u,m,x,h,p,y,v;return(0,s.jsxs)("div",{className:"border border-secondary-200 rounded-lg p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h4",{className:"text-sm font-medium text-secondary-700",children:["Producto ",r+1]}),A.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>T(r),className:"text-danger-500 hover:text-danger-700",children:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d,{label:"Nombre del Producto",placeholder:"Nombre del producto",error:null===(i=k.orderDetails)||void 0===i?void 0:null===(a=i[r])||void 0===a?void 0:null===(t=a.productName)||void 0===t?void 0:t.message,...N("orderDetails.".concat(r,".productName"))}),(0,s.jsx)(d,{label:"C\xf3digo del Producto",placeholder:"C\xf3digo \xfanico",error:null===(l=k.orderDetails)||void 0===l?void 0:null===(n=l[r])||void 0===n?void 0:null===(o=n.productCode)||void 0===o?void 0:o.message,...N("orderDetails.".concat(r,".productCode"))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d,{label:"Cantidad",type:"number",min:"1",placeholder:"1",error:null===(m=k.orderDetails)||void 0===m?void 0:null===(u=m[r])||void 0===u?void 0:null===(c=u.quantity)||void 0===c?void 0:c.message,...N("orderDetails.".concat(r,".quantity"),{valueAsNumber:!0})}),(0,s.jsx)(d,{label:"Precio Unitario",type:"number",min:"0.01",step:"0.01",placeholder:"0.00",error:null===(p=k.orderDetails)||void 0===p?void 0:null===(h=p[r])||void 0===h?void 0:null===(x=h.unitPrice)||void 0===x?void 0:x.message,...N("orderDetails.".concat(r,".unitPrice"),{valueAsNumber:!0})})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{className:"text-sm text-secondary-600",children:["Subtotal: $",q((null===(y=L[r])||void 0===y?void 0:y.quantity)||0,(null===(v=L[r])||void 0===v?void 0:v.unitPrice)||0).toFixed(2)]})})]},e.id)}),k.orderDetails&&(0,s.jsx)("p",{className:"text-sm text-danger-600",children:k.orderDetails.message})]}),(0,s.jsx)("div",{className:"border-t border-secondary-200 pt-4",children:(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{className:"text-lg font-semibold text-secondary-900",children:["Total: $",L.reduce((e,r)=>e+q(r.quantity||0,r.unitPrice||0),0).toFixed(2)]})})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(l,{type:"button",variant:"outline",onClick:Z,disabled:b,children:"Cancelar"}),(0,s.jsx)(l,{type:"submit",loading:b,disabled:b,children:b?"Actualizando Orden...":"Actualizar Orden"})]})]})]})}):null},C=t(7972),k=t(1295),D=t(8203),E=t(4322),O=t(1298),A=e=>{let{isOpen:r,order:t,onClose:a}=e;if(!r||!t)return null;let i=e=>new Date(e).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-secondary-200",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-secondary-900",children:["Detalle de la Orden #",t.id]}),(0,s.jsx)("button",{onClick:a,className:"text-secondary-400 hover:text-secondary-600",children:(0,s.jsx)(h.Z,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-secondary-50 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Informaci\xf3n del Cliente"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(C.Z,{className:"h-5 w-5 text-secondary-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-secondary-600",children:"Nombre"}),(0,s.jsx)("p",{className:"font-medium text-secondary-900",children:t.customerName})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5 text-secondary-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-secondary-600",children:"Email"}),(0,s.jsx)("p",{className:"font-medium text-secondary-900",children:t.customerEmail})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-secondary-50 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Informaci\xf3n de la Orden"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(D.Z,{className:"h-5 w-5 text-secondary-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-secondary-600",children:"Fecha de la Orden"}),(0,s.jsx)("p",{className:"font-medium text-secondary-900",children:new Date(t.orderDate).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(E.Z,{className:"h-5 w-5 text-secondary-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-secondary-600",children:"Productos"}),(0,s.jsxs)("p",{className:"font-medium text-secondary-900",children:[t.orderDetails.length," producto",1!==t.orderDetails.length?"s":""]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-secondary-900",children:"Productos de la Orden"}),(0,s.jsx)("div",{className:"border border-secondary-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-secondary-200",children:[(0,s.jsx)("thead",{className:"bg-secondary-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Producto"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"C\xf3digo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Cantidad"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Precio Unitario"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Subtotal"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-secondary-200",children:t.orderDetails.map((e,r)=>(0,s.jsxs)("tr",{className:"hover:bg-secondary-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary-900",children:e.productName}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:e.productCode}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:e.quantity}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:["$",e.unitPrice.toFixed(2)]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary-900",children:["$",e.subtotal.toFixed(2)]})]},r))})]})})]}),(0,s.jsx)("div",{className:"border-t border-secondary-200 pt-4",children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(O.Z,{className:"h-6 w-6 text-primary-600"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-primary-600",children:["$",t.orderDetails.reduce((e,r)=>e+r.quantity*r.unitPrice,0).toFixed(2)]})]}),(0,s.jsx)("p",{className:"text-sm text-secondary-500",children:"Total de la Orden"})]})})}),(0,s.jsxs)("div",{className:"bg-secondary-50 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-secondary-700 mb-3",children:"Informaci\xf3n del Sistema"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-secondary-600",children:"Creado por:"}),(0,s.jsx)("p",{className:"text-secondary-900",children:t.createdBy}),(0,s.jsx)("p",{className:"text-secondary-500",children:i(t.createdAt)})]}),t.updatedBy&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-secondary-600",children:"Actualizado por:"}),(0,s.jsx)("p",{className:"text-secondary-900",children:t.updatedBy}),(0,s.jsx)("p",{className:"text-secondary-500",children:i(t.updatedAt)})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 bg-secondary-600 text-white rounded-md hover:bg-secondary-700 transition-colors",children:"Cerrar"})})]})]})})}},8222:function(e,r,t){t.d(r,{K0:function(){return o},nC:function(){return n},x1:function(){return i}});class s extends Error{constructor(e,r,t){super(e),this.status=r,this.errors=t,this.name="ApiError"}}class a{setToken(e){this.token=e}clearToken(){this.token=null}async request(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(this.baseUrl).concat(e);console.log("ApiClient: Haciendo request a:",t),console.log("ApiClient: Opciones:",{...r,body:r.body?"[BODY]":void 0});let a={"Content-Type":"application/json"};r.headers&&(r.headers instanceof Headers?r.headers.forEach((e,r)=>{a[r]=e}):Array.isArray(r.headers)?r.headers.forEach(e=>{let[r,t]=e;a[r]=t}):Object.assign(a,r.headers)),this.token&&(a.Authorization="Bearer ".concat(this.token),console.log("ApiClient: Token incluido en headers"));let i={...r,headers:a};try{console.log("ApiClient: Enviando request...");let e=await fetch(t,i);if(console.log("ApiClient: Respuesta recibida:",e.status,e.statusText),!e.ok){let r="HTTP error! status: ".concat(e.status),t=[];try{let s=await e.json();r=s.message||r,t=s.errors||[]}catch(e){}throw console.error("ApiClient: Error en respuesta:",r),new s(r,e.status,t)}if(204===e.status)return console.log("ApiClient: Respuesta 204 - No Content"),null;try{let r=await e.json();return console.log("ApiClient: Respuesta parseada:",r),r}catch(t){let r=await e.text();return console.log("ApiClient: Respuesta como texto:",r),r}}catch(e){if(console.error("ApiClient: Error en request:",e),e instanceof s)throw e;throw new s(e instanceof Error?e.message:"Network error",0)}}async get(e){return this.request(e,{method:"GET"})}async post(e,r){return this.request(e,{method:"POST",body:r?JSON.stringify(r):void 0})}async put(e,r){return this.request(e,{method:"PUT",body:r?JSON.stringify(r):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async patch(e,r){return this.request(e,{method:"PATCH",body:r?JSON.stringify(r):void 0})}constructor(e="https://dinet-staging-api-awd9asgkd8eegmef.brazilsouth-01.azurewebsites.net/api"){this.token=null,this.baseUrl=e}}let i=new a,o=e=>{localStorage.setItem("auth_token",e)},n=()=>{localStorage.removeItem("auth_token")};{let e=localStorage.getItem("auth_token");e&&i.setToken(e)}},733:function(e,r,t){t.d(r,{t:function(){return n}});var s=t(4660),a=t(4810),i=t(8222);class o{static async login(e){console.log("AuthService: Iniciando login con credenciales:",{...e,password:"***"});try{console.log("AuthService: Haciendo POST a /Auth/login...");let r=await i.x1.post("/Auth/login",e);return console.log("AuthService: Respuesta del servidor:",r),r.token?(console.log("AuthService: Guardando token..."),(0,i.K0)(r.token),i.x1.setToken(r.token),console.log("AuthService: Token guardado correctamente")):console.warn("AuthService: No se recibi\xf3 token en la respuesta"),r}catch(e){throw console.error("AuthService: Error en login:",e),e}}static async logout(){try{await i.x1.post("/auth/logout")}catch(e){console.warn("Logout del servidor fall\xf3, continuando con logout local")}finally{(0,i.nC)(),i.x1.clearToken()}}static isAuthenticated(){return!!localStorage.getItem("auth_token")}static async getCurrentUser(){try{return await i.x1.get("/auth/me")}catch(e){return(0,i.nC)(),i.x1.clearToken(),null}}static async refreshToken(){try{let e=await i.x1.post("/auth/refresh");if(e.token)return(0,i.K0)(e.token),i.x1.setToken(e.token),e.token;return null}catch(e){return await this.logout(),null}}static isTokenExpired(e){try{let r=JSON.parse(atob(e.split(".")[1])),t=Date.now()/1e3;return r.exp<t}catch(e){return!0}}}let n=(0,s.Ue)()((0,a.tJ)((e,r)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:async(r,t)=>{console.log("AuthStore: Iniciando login con:",{username:r,password:"***"}),e({isLoading:!0});try{console.log("AuthStore: Llamando a AuthService.login...");let s=await o.login({username:r,password:t});console.log("AuthStore: Login exitoso, respuesta:",s),e({user:s.user,token:s.token,isAuthenticated:!0,isLoading:!1}),console.log("AuthStore: Estado actualizado correctamente")}catch(r){throw console.error("AuthStore: Error en login:",r),e({isLoading:!1}),r}},logout:async()=>{e({isLoading:!0});try{await o.logout()}catch(e){console.warn("Error durante logout:",e)}finally{e({user:null,token:null,isAuthenticated:!1,isLoading:!1})}},setUser:r=>{e({user:r})},setToken:r=>{e({token:r,isAuthenticated:!0})},clearAuth:()=>{e({user:null,token:null,isAuthenticated:!1,isLoading:!1})},checkAuth:async()=>{let{token:t}=r();if(!t){e({isAuthenticated:!1});return}e({isLoading:!0});try{let r=await o.getCurrentUser();r?e({user:r,isAuthenticated:!0,isLoading:!1}):e({user:null,token:null,isAuthenticated:!1,isLoading:!1})}catch(r){e({user:null,token:null,isAuthenticated:!1,isLoading:!1})}}}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))},5635:function(e,r,t){t.d(r,{L:function(){return o}});var s=t(4660),a=t(8222);class i{static async getOrders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new URLSearchParams;e.pageNumber&&r.append("pageNumber",e.pageNumber.toString()),e.pageSize&&r.append("pageSize",e.pageSize.toString()),e.customerFilter&&r.append("customerFilter",e.customerFilter),e.startDate&&r.append("startDate",e.startDate),e.endDate&&r.append("endDate",e.endDate);let t=r.toString();return a.x1.get(t?"/Orders?".concat(t):"/Orders")}static async getOrderById(e){return a.x1.get("/Orders/".concat(e))}static async createOrder(e){return a.x1.post("/Orders",e)}static async updateOrder(e,r){return a.x1.put("/Orders/".concat(e),r)}static async deleteOrder(e){return a.x1.delete("/Orders/".concat(e))}}let o=(0,s.Ue)((e,r)=>({orders:[],currentOrder:null,isLoading:!1,error:null,pagination:{pageNumber:1,pageSize:10,totalCount:0,totalPages:0},fetchOrders:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e({isLoading:!0,error:null});try{let s=await i.getOrders({pageNumber:r().pagination.pageNumber,pageSize:r().pagination.pageSize,...t});e({orders:s.items,pagination:{pageNumber:s.pageNumber,pageSize:s.pageSize,totalCount:s.totalCount,totalPages:s.totalPages},isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Error al cargar las \xf3rdenes",isLoading:!1})}},fetchOrderById:async r=>{e({isLoading:!0,error:null});try{let t=await i.getOrderById(r);e({currentOrder:t,isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Error al cargar la orden",isLoading:!1})}},createOrder:async r=>{e({isLoading:!0,error:null});try{let t=await i.createOrder(r);e(e=>({orders:[t,...e.orders],isLoading:!1}))}catch(r){throw e({error:r instanceof Error?r.message:"Error al crear la orden",isLoading:!1}),r}},updateOrder:async(r,t)=>{e({isLoading:!0,error:null});try{let s=await i.updateOrder(r,t);e(e=>{var t;return{orders:e.orders.map(e=>e.id===r?s:e),currentOrder:(null===(t=e.currentOrder)||void 0===t?void 0:t.id)===r?s:e.currentOrder,isLoading:!1}})}catch(r){throw e({error:r instanceof Error?r.message:"Error al actualizar la orden",isLoading:!1}),r}},deleteOrder:async r=>{e({isLoading:!0,error:null});try{await i.deleteOrder(r),e(e=>{var t;return{orders:e.orders.filter(e=>e.id!==r),currentOrder:(null===(t=e.currentOrder)||void 0===t?void 0:t.id)===r?null:e.currentOrder,isLoading:!1}})}catch(r){throw e({error:r instanceof Error?r.message:"Error al eliminar la orden",isLoading:!1}),r}},setCurrentOrder:r=>{e({currentOrder:r})},clearError:()=>{e({error:null})}}))}}]);